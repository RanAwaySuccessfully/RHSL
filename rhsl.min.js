"use strict";var RHSL={_currentElement:null,scan:function(e){var t=document.querySelectorAll("[rhslcolor]");if(e)for(var r=0;r<t.length;r++)this.addOrRemove(t[r],!1,!0);for(r=0;r<t.length;r++)t[r].value?this.addOrRemove(t[r],t[r].value):this.addOrRemove(t[r])},addOrRemove:function(e,t,r){try{if(!e)throw"No element was provided.";if("BUTTON"!==e.tagName&&"INPUT"!==e.tagName)throw"Element is not <button> or <input>.";if("INPUT"===e.tagName&&e.type&&"text"!==e.type)throw"Input type must be empty or text."}catch(e){return void console.error("RHSL: Error while trying to add/remove an EventListener: "+e)}if(r)e.removeEventListener("click",this.toggle,!1),e.removeEventListener("input",this.onInput,!1);else{t||(console.warn("RHSL: Color not provided. Using #FFFFFF."),t="#FFFFFF"),e.addEventListener("click",this.toggle,!1),e.addEventListener("input",this.onInput,!1);var o=this.colorConverter(t,!0);this.fineChange(e,o)}"refresh"===r&&this.addOrRemove(e,t)},onInput:function(e){RHSL.toggle(e,!1,!0);var t=RHSL.colorConverter(e.target.value,!0,!0);t[0]=Math.round(t[0]),t[1]=Math.round(t[1]),t[2]=Math.round(t[2]),RHSL.fineChange(e.target,t,!1,!0)},toggle:function(e,t,r){if(document.getElementById("rhslcolorpickercontainer"))document.body.removeChild(document.getElementById("rhslcolorpickercontainer")),document.body.removeEventListener("mousedown",RHSL.hideColorPicker,!0),window.removeEventListener("resize",RHSL.windowResize,!0),RHSL._currentElement=null;else{t||(t=e.target);var o,l,n,i,s,a,h=t.getAttribute("rhslcolor");if(h){h=RHSL.properties(h);for(var c=0;c<h.length;c++)h[c][0].match(/^size$/)?o=h[c][1]:h[c][0].match(/^align$/)?l=h[c][1]:h[c][0].match(/^theme$/)?u=h[c][1]:h[c][0].match(/^hsltype$/)?n=h[c][1]:h[c][0].match(/^padding$/)?i=h[c][1]:h[c][0].match(/^inputs$/)?s=h[c][1]:h[c][0].match(/^addclass$/)&&(a=h[c][1])}if(o&&Array.isArray(o)?((isNaN(o[0])||o[0]<75)&&(o[0]=180),(isNaN(o[1])||o[1]<75)&&(o[1]=150)):o=[180,150],(!i||i<0)&&(i=7),l||(l="left"),n||(n="normal"),"dark"===u)u=["border-color: #555; background: #333;","border-color: #000;","border-color: #000; background: #111; color: #FFF;"];else if(Array.isArray(u)){for(c=0;c<4;c++){if(!u[c])if(2===c)u[c]="#000";else{if(3!==c){u[c]="transparent";continue}u[c]="#FFF"}u[c]=RHSL.colorConverter(u[c]),u[c]="rgb("+u[c][0]+", "+u[c][1]+", "+u[c][2]+")"}u=["border-color: "+u[0]+"; background: "+u[1]+";","border-color: "+u[2]+";","border-color: "+u[2]+"; background: "+u[3]+"; color:"+RHSL.contrast(RHSL.colorConverter(u[3]))+";"]}else var u=["border-color: #AAA; background: #DDD;","border-color: #555;","border-color: #555; background: #EEE; color: #000;"];if("luv"===n&&window.hsluv){var d=RHSL.colorConverter(t.value);d=window.hsluv.rgbToHsluv([d[0]/255,d[1]/255,d[2]/255]);var g="linear-gradient(90deg, #EA0064, #D34800, #AC6700, #957200, #817900, #6A8000, #3F8700, #00894B, #00876A, #00867C, #00848B, #00829C, #007EB7, #2A6CFF, #A23EFF, #CD00E2, #D900BC, #E20097, #EA0064)",m="linear-gradient(rgba(119, 119, 119, 0), rgba(119, 119, 119, 1))",v="linear-gradient(#FFFFFF, "+window.hsluv.hsluvToHex([d[0],d[1],90])+", "+window.hsluv.hsluvToHex([d[0],d[1],80])+", "+window.hsluv.hsluvToHex([d[0],d[1],70])+", "+window.hsluv.hsluvToHex([d[0],d[1],60])+", "+window.hsluv.hsluvToHex([d[0],d[1],50])+", "+window.hsluv.hsluvToHex([d[0],d[1],40])+", "+window.hsluv.hsluvToHex([d[0],d[1],30])+", "+window.hsluv.hsluvToHex([d[0],d[1],20])+", "+window.hsluv.hsluvToHex([d[0],d[1],10])+", #000000)"}else{d=RHSL.colorConverter(t.value,!0),Math.round(d[0]),Math.round(d[1]),Math.round(d[2]);var f=Math.round(d[0])+", "+Math.round(d[1])+"%";g="linear-gradient(90deg, hsl(0, 100%, 50%), hsl(20, 100%, 50%), hsl(40, 100%, 50%), hsl(60, 100%, 50%), hsl(80, 100%, 50%), hsl(100, 100%, 50%), hsl(120, 100%, 50%), hsl(140, 100%, 50%), hsl(160, 100%, 50%), hsl(180, 100%, 50%), hsl(200, 100%, 50%), hsl(220, 100%, 50%), hsl(240, 100%, 50%), hsl(260, 100%, 50%), hsl(280, 100%, 50%), hsl(300, 100%, 50%), hsl(320, 100%, 50%), hsl(340, 100%, 50%), hsl(360, 100%, 50%))",m="linear-gradient(hsla(0, 0%, 50%, 0), hsla(0, 0%, 50%, 1))",v="linear-gradient(hsl("+f+", 100%), hsl("+f+", 50%), hsl("+f+", 0%))"}var p=Math.round(d[0]/360*o[0]-10),b=Math.round(o[1]-1-d[1]/100*(o[1]-1)-10),A=Math.round(o[1]-d[2]/100*o[1]-10);if("true"===s){if(o[0]>=140)var w=" justify-content: center;";else w="";s="<style>.rhslcolorinputs input, .rhslcolorinputs button {"+u[2]+'}</style><div class="rhslcolorinputs" style="margin: '+i+++"px; margin-top: 0; width: "+(Number(o[0])+23+Number(i))+"px;"+w+'"><input type="number" class="rhslcolorinput" oninput="RHSL.colorPicker(this.parentElement.parentElement.children[0], false, true, [this.value,,], true)" min="0" max="360" value="'+Math.round(d[0])+'"><input type="number" class="rhslcolorinput" oninput="RHSL.colorPicker(this.parentElement.parentElement.children[0], false, true, [,this.value,], true)" min="0" max="100" value="'+Math.round(d[1])+'"><input type="number" class="rhslcolorinput" oninput="RHSL.colorPicker(this.parentElement.parentElement.children[0], false, true, [,,this.value], true)" min="0" max="100" value="'+Math.round(d[2])+'"><button type="button" onclick="rhslToggle(false, this.parentElement.parentElement);">X</button></div>'}else s="";var y=document.createElement("div");y.id="rhslcolorpickercontainer",y.setAttribute("style",u[0]),a&&y.setAttribute("class",a),y.innerHTML='<div class="rhslcolormousearea" onmousemove="RHSL.colorPicker(this, event);" onclick="RHSL.colorPicker(this, event, true);" style="padding: '+i+++'px;"><div class="rhslcolorpicker" style="background: '+g+"; "+u[1]+'"><div style="background: '+m+"; width: "+o[0]+"px; height: "+o[1]+'px;"><img src="data:image/gif;base64,R0lGODlhFAAUAIABAAAAAP///yH5BAEKAAEALAAAAAAUABQAAAImjH8AyJ3rolFS0uouZno/D4aZQkJIiaJNaoqu14Ex3Mo1/c6bbhQAOw==" class="rhslcolorpickerselected" style="top: '+b+"px; left: "+p+'px;"></div></div><div class="rhslcolorpickerside" style="background: '+v+"; "+u[1]+" margin-left: "+i+'px;"><img src="data:image/gif;base64,R0lGODlhFAAUAIABAAAAAP///yH5BAEKAAEALAAAAAAUABQAAAIdjI+py+0Po5yg2ouz3nmG64GUFXLmeXrqyrZuUwAAOw==" class="rhslcolorpickerselected" style="top: '+A+'px; left: -2px;"></div></div>'+s,document.body.appendChild(y),document.body.addEventListener("mousedown",RHSL.hideColorPicker,!0),window.addEventListener("resize",RHSL.windowResize,!0),RHSL._currentElement=t,RHSL.alignElement(y,t,l)}r&&RHSL.toggle(e,t)},properties:function(e,t){(e=e.split(";")).pop();for(var r=0;r<e.length;r++)if(" "===e[r].charAt(0)&&(e[r]=e[r].substring(1)),e[r]=e[r].split(":")," "===e[r][1].charAt(0)&&(e[r][1]=e[r][1].substring(1)),e[r][1].match(",")){e[r][1]=e[r][1].split(",");for(var o=0;o<e[r][1].length;o++)" "===e[r][1][o].charAt(0)&&(e[r][1][o]=e[r][1][o].substring(1))}if(t)for(r=0;r<e.length;r++)if(e[r][0].match(t)){e=e[r][1];break}return e},windowResize:function(){var e=document.getElementById("rhslcolorpickercontainer"),t=RHSL._currentElement,r=t.getAttribute("rhslcolor");r=r?RHSL.properties(r,"align"):"left",RHSL.alignElement(e,t,r)},alignElement:function(e,t,r,o){var l=this.getPosition(t,!0);if(e.style.top=l[1]+t.offsetHeight+1+"px",o||(o=1),"left"===r&&o<4)(n=l[0]-5)+e.offsetWidth>document.body.offsetWidth?(o++,this.alignElement(e,t,"right",o)):e.style.left=n+"px";else if("right"===r&&o<4){(n=l[0]+t.offsetWidth-e.offsetWidth+5)<0?(o++,this.alignElement(e,t,"left",o)):e.style.left=n+"px"}else if("center"===r||o>=4){var n;((n=l[0]-(e.offsetWidth-t.offsetWidth)/2)<0||n+e.offsetWidth/2>document.body.offsetWidth)&&o<4?(o++,this.alignElement(e,t,"left",o)):e.style.left=n+"px"}},hideColorPicker:function(e){var t=e.target||e.srcElement,r=document.getElementById("rhslcolorpickercontainer");t===r||RHSL.isChildOf(t,r)||RHSL.toggle()},isChildOf:function(e,t){return e.parentNode===t||null!==e.parentNode&&this.isChildOf(e.parentNode,t)},colorPicker:function(e,t,r,o,l){if(t.which&&t.buttons||r){var n=e.children[0],i=e.children[1],s=this.getPosition(n);if(o)var a=Math.round(o[0]/360*n.clientWidth),h=Math.round((100-o[1])/100*n.clientHeight),c=Math.round((100-o[2])/100*i.clientHeight);else{a=t.clientX,h=t.clientY;if(a>=this.getPosition(i)[0]){c=h-s[1];a=!1,h=!1}else{c=!1;a-=s[0],h-=s[1]}if(window.getSelection)var u=window.getSelection();else if(document.selection)u=document.selection.createRange();u&&u.rangeCount&&u.removeAllRanges(),u&&u.text>""&&document.selection.empty()}if(a||0===a){a<0&&(a=0),a>n.clientWidth&&(a=n.clientWidth),n.children[0].firstElementChild.style.left=a-10+"px";var d=Math.round(a/n.clientWidth*360)}else d=Math.round((Number(n.children[0].firstElementChild.style.left.match(/-?\d+/))+10)/n.clientWidth*360);if(h||0===h){h<0&&(h=0),h>n.clientHeight&&(h=n.clientHeight),n.children[0].firstElementChild.style.top=h-10+"px";var g=Math.round((n.clientHeight-h)/n.clientHeight*100)}else g=Math.round(Math.abs(Number(n.children[0].firstElementChild.style.top.match(/-?\d+/))+10-n.clientHeight)/n.clientHeight*100);if(c||0===c){c<0&&(c=0),c>i.clientHeight&&(c=i.clientHeight),i.firstElementChild.style.top=c-10+"px";var m=Math.round((n.clientHeight-c)/n.clientHeight*100)}else m=Math.round(Math.abs(Number(i.firstElementChild.style.top.match(/-?\d+/))+10-n.clientHeight)/n.clientHeight*100);var v=this._currentElement;if(v.getAttribute("rhslcolor").match(/hsltype: ?luv;/)&&window.hsluv)var f=!0;else f=!1;if(i.style.background=f?"linear-gradient(#FFFFFF, "+window.hsluv.hsluvToHex([d,g,90])+", "+window.hsluv.hsluvToHex([d,g,80])+", "+window.hsluv.hsluvToHex([d,g,70])+", "+window.hsluv.hsluvToHex([d,g,60])+", "+window.hsluv.hsluvToHex([d,g,50])+", "+window.hsluv.hsluvToHex([d,g,40])+", "+window.hsluv.hsluvToHex([d,g,30])+", "+window.hsluv.hsluvToHex([d,g,20])+", "+window.hsluv.hsluvToHex([d,g,10])+", #000000)":"linear-gradient(hsl("+d+", "+g+"%, 100%), hsl("+d+", "+g+"%, 50%), hsl("+d+", "+g+"%, 0%))",v.getAttribute("rhslcolor").match(/inputs: ?true;/)&&!l){o=[d,g,m];for(var p=document.getElementsByClassName("rhslcolorinput"),b=0;b<p.length;b++)p[b].value=o[b]}this.fineChange(v,[d,g,m],f),v.hasAttribute("oninput")&&v.oninput(),r&&v.hasAttribute("onchange")&&v.onchange()}},getPosition:function(e,t){if(e=e.getBoundingClientRect(),t)var r=window.pageXOffset||document.documentElement.scrollLeft,o=window.pageYOffset||document.documentElement.scrollTop,l=e.left+r,n=e.top+o;else l=e.left,n=e.top;return[l,n]},fineChange:function(e,t,r,o){var l,n,i=e.getAttribute("rhslcolor");if(i){i=this.properties(i);for(var s=0;s<i.length;s++)i[s][0].match(/^update-self$/)?l=i[s][1]:i[s][0].match(/^update-linked$/)&&(n=i[s][1])}var a=t;l||(l=["bg-color","hex"]);var h=this.contrast(this.colorParser(t,"rgb",r,!0),r);if(t=this.colorParser(t,l[1],r),(l[0].match(/\+text$/)||"text"===l[0]&&"INPUT"!==e.tagName)&&(e.innerHTML=t),l[0].match(/^bg-color(\+text)?$/)?(e.style.background=t,e.style.color=h):l[0].match(/^bg-only(\+text)?$/)?e.style.background=t:l[0].match(/^text-color(\+text)?$/)?e.style.color=t:l[0].match(/^border-color(\+text)?$/)?e.style.borderColor=t:l[0].match(/^outline-color(\+text)?$/)&&(e.style.outlineColor=t),o||(e.value=t),n){var c;Array.isArray(n)||(n=[n]);for(s=0;s<n.length;s++)t=a,c=n[s].replace(/[\(\)]/g,"").split(" "),document.getElementById(c[0])&&(e=document.getElementById(c[0]),c[1]||(c[1]="bg+text"),c[2]||(c[2]="hex"),h=this.contrast(this.colorParser(t,"rgb",r,!0)),t=this.colorParser(t,c[2],r),(c[1].match(/\+text$/)||"text"===c[1]&&"INPUT"!==e.tagName)&&(e.innerHTML=t),c[1].match(/^bg-color(\+text)?$/)?(e.style.background=t,e.style.color=h):c[1].match(/^bg-only(\+text)?$/)?e.style.background=t:c[1].match(/^text-color(\+text)?$/)?e.style.color=t:c[1].match(/^border-color(\+text)?$/)?e.style.borderColor=t:c[1].match(/^outline-color(\+text)?$/)&&(e.style.outlineColor=t),e.value=t)}},colorConverter(e,t,r){var o=!1;if((e.match(/^#[\dA-F]{3}$/i)||e.match(/^#[\dA-F]{4}$/i))&&(e="#"+(e=[e.charAt(1),e.charAt(2),e.charAt(3)])[0]+e[0]+e[1]+e[1]+e[2]+e[2]),(e.match(/^#[\dA-F]{6}$/i)||e.match(/^#[\dA-F]{8}$/i))&&(e="rgb("+parseInt(e.substr(1,2),16)+", "+parseInt(e.substr(3,2),16)+", "+parseInt(e.substr(5,2),16)+")"),e.match(/^rgb/)){e=(e=e.replace(/[rgba()]/g,"")).split(","),(!Array.isArray(e)||e.length>4)&&(o=!0);for(var l=0;l<3;l++)(e[l]<0||e[l]>255||isNaN(e[l]))&&(o=!0);if(!o)return t?((e=this.rgbToHsl(e[0],e[1],e[2]))[0]*=360,e[1]*=100,e[2]*=100):(e[0]=Number(e[0]),e[1]=Number(e[1]),e[2]=Number(e[2])),e}else if(e.match(/^hsl/)){if(e=(e=e.replace(/[hsla%()]/g,"")).split(","),(!Array.isArray(e)||e.length>4)&&(o=!0),(e[0]<0||e[0]>360||isNaN(e[0]))&&(o=!0),(e[1]<0||e[1]>100||isNaN(e[1]))&&(o=!0),(e[2]<0||e[2]>100||isNaN(e[2]))&&(o=!0),!o)return t?(e[0]=Number(e[0]),e[1]=Number(e[1]),e[2]=Number(e[2])):(e[0]/=360,e[1]/=100,e[2]/=100,e=this.hslToRgb(e[0],e[1],e[2])),e}else o=!0;if(o)return r||console.warn("RHSL: The color must be in either of these formats: #0F0, #00FF00, rgb(0, 255, 0) or hsl(120, 100%, 50%). Their alpha counterparts are supported, but the color picker will discard the alpha value provided. If using HSL values, the hue must not be over 360. Using #000000."),[0,0,0]},colorParser:function(e,t,r,o){return t.match(/^rgb$/)?(r?((e=window.hsluv.hsluvToRgb(e))[0]*=255,e[1]*=255,e[2]*=255):e=this.colorConverter("hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)"),e[0]=Math.round(e[0]),e[1]=Math.round(e[1]),e[2]=Math.round(e[2]),o||(e="rgb("+e[0]+", "+e[1]+", "+e[2]+")")):t.match(/^hsl$/)?(r&&((e=window.hsluv.hsluvToRgb(e))[0]=Math.round(255*e[0]),e[1]=Math.round(255*e[1]),e[2]=Math.round(255*e[2]),e=this.colorConverter("rgb("+e[0]+", "+e[1]+", "+e[2]+")",!0)),e[0]=Math.round(e[0]),e[1]=Math.round(e[1]),e[2]=Math.round(e[2]),o||(e="hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)")):r?e=window.hsluv.hsluvToHex(e).toUpperCase():((e=[(e=this.colorConverter("hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)"))[0].toString(16),e[1].toString(16),e[2].toString(16)])[0].length<2&&(e[0]="0"+e[0]),e[1].length<2&&(e[1]="0"+e[1]),e[2].length<2&&(e[2]="0"+e[2]),e="#"+e.join("").toUpperCase()),e},contrast:function(e){e.forEach(this.srgbMadness);var t=.2126*e[0]+.7152*e[1]+.0722*e[2],r=Math.round(1.05/(t+.05)*10)/10;return Math.round((t+.05)/.05*10)/10>r?"#000000":"#FFFFFF"},srgbMadness:function(e,t,r){(e/=255)<=.03928?e/=12.92:e=Math.pow((e+.055)/1.055,2.4),r[t]=e},rgbToHsl:function(e,t,r){e/=255,t/=255,r/=255;var o,l,n=Math.max(e,t,r),i=Math.min(e,t,r),s=(n+i)/2;if(n==i)o=l=0;else{var a=n-i;switch(l=s>.5?a/(2-n-i):a/(n+i),n){case e:o=(t-r)/a+(t<r?6:0);break;case t:o=(r-e)/a+2;break;case r:o=(e-t)/a+4}o/=6}return[o,l,s]},hslToRgb:function(e,t,r){var o,l,n;if(0==t)o=l=n=r;else{var i=function(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e},s=r<.5?r*(1+t):r+t-r*t,a=2*r-s;o=i(a,s,e+1/3),l=i(a,s,e),n=i(a,s,e-1/3)}return[Math.round(255*o),Math.round(255*l),Math.round(255*n)]}};window.addEventListener("load",RHSL.scan.bind(RHSL,!0));
